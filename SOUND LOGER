local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local Player = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = Player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 820, 0, 560)
frame.Position = UDim2.new(0.5, -410, 0.5, -280)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
frame.BorderSizePixel = 0
frame.BackgroundTransparency = 1
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local frameCorner = Instance.new("UICorner", frame)
frameCorner.CornerRadius = UDim.new(0, 14)

local topBar = Instance.new("Frame")
topBar.Size = UDim2.new(1, 0, 0, 56)
topBar.Position = UDim2.new(0, 0, 0, 0)
topBar.BackgroundTransparency = 1
topBar.Parent = frame

local title = Instance.new("TextLabel", topBar)
title.Size = UDim2.new(1, -220, 1, 0)
title.Position = UDim2.new(0, 20, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Loading..."
title.Font = Enum.Font.GothamBold
title.TextSize = 28
title.TextColor3 = Color3.new(1,1,1)
title.TextTransparency = 1
title.TextXAlignment = Enum.TextXAlignment.Left

local percent = Instance.new("TextLabel", topBar)
percent.Size = UDim2.new(0, 140, 1, 0)
percent.Position = UDim2.new(1, -160, 0, 0)
percent.BackgroundTransparency = 1
percent.Text = "0%"
percent.Font = Enum.Font.Gotham
percent.TextSize = 22
percent.TextColor3 = Color3.fromRGB(180,180,180)
percent.TextTransparency = 1
percent.TextXAlignment = Enum.TextXAlignment.Right

local complete = Instance.new("TextLabel", topBar)
complete.Size = UDim2.new(0, 160, 1, 0)
complete.Position = UDim2.new(1, -330, 0, 0)
complete.BackgroundTransparency = 1
complete.Text = "Complete"
complete.Font = Enum.Font.GothamBold
complete.TextSize = 22
complete.TextColor3 = Color3.fromRGB(0,220,120)
complete.TextTransparency = 1
complete.TextXAlignment = Enum.TextXAlignment.Center

local madeBy = Instance.new("TextLabel", frame)
madeBy.Size = UDim2.new(1, 0, 0, 56)
madeBy.Position = UDim2.new(0, 0, 0.5, -28)
madeBy.BackgroundTransparency = 1
madeBy.Text = "Made By Trezi"
madeBy.Font = Enum.Font.GothamBold
madeBy.TextSize = 32
madeBy.TextColor3 = Color3.new(1,1,1)
madeBy.TextTransparency = 1
madeBy.TextXAlignment = Enum.TextXAlignment.Center
madeBy.Visible = false

local modeSelect = Instance.new("Frame", frame)
modeSelect.Size = UDim2.new(0, 300, 0, 200)
modeSelect.Position = UDim2.new(0.5, -150, 0.5, -100)
modeSelect.BackgroundTransparency = 1
modeSelect.Visible = false

local soundBtn = Instance.new("TextButton", modeSelect)
soundBtn.Size = UDim2.new(1, 0, 0, 50)
soundBtn.Position = UDim2.new(0,0,0,0)
soundBtn.Text = "Sound Logger"
soundBtn.Font = Enum.Font.GothamBold
soundBtn.TextSize = 22
soundBtn.BackgroundColor3 = Color3.fromRGB(0,120,255)
soundBtn.TextColor3 = Color3.new(1,1,1)
local soundCorner = Instance.new("UICorner", soundBtn)
soundCorner.CornerRadius = UDim.new(0,8)

local animBtn = Instance.new("TextButton", modeSelect)
animBtn.Size = UDim2.new(1, 0, 0, 50)
animBtn.Position = UDim2.new(0,0,0,60)
animBtn.Text = "Animation Logger"
animBtn.Font = Enum.Font.GothamBold
animBtn.TextSize = 22
animBtn.BackgroundColor3 = Color3.fromRGB(0,220,120)
animBtn.TextColor3 = Color3.new(1,1,1)
local animCorner = Instance.new("UICorner", animBtn)
animCorner.CornerRadius = UDim.new(0,8)

local contentHolder = Instance.new("Frame", frame)
contentHolder.Size = UDim2.new(1, -40, 1, -120)
contentHolder.Position = UDim2.new(0, 20, 0, 70)
contentHolder.BackgroundTransparency = 1
contentHolder.Visible = false

local logFrame = Instance.new("ScrollingFrame", contentHolder)
logFrame.Size = UDim2.new(1, -160, 1, 0)
logFrame.Position = UDim2.new(0, 0, 0, 0)
logFrame.BackgroundColor3 = Color3.fromRGB(14,14,14)
logFrame.BorderSizePixel = 0
logFrame.ScrollBarThickness = 8
logFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
logFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
logFrame.ScrollBarImageColor3 = Color3.fromRGB(80,80,80)

local logCorner = Instance.new("UICorner", logFrame)
logCorner.CornerRadius = UDim.new(0, 10)

local listLayout = Instance.new("UIListLayout", logFrame)
listLayout.Padding = UDim.new(0, 8)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local padding = Instance.new("UIPadding", logFrame)
padding.PaddingTop = UDim.new(0, 12)
padding.PaddingBottom = UDim.new(0, 12)
padding.PaddingLeft = UDim.new(0, 12)
padding.PaddingRight = UDim.new(0, 12)

local controls = Instance.new("Frame", contentHolder)
controls.Size = UDim2.new(0, 140, 1, 0)
controls.Position = UDim2.new(1, -140, 0, 0)
controls.BackgroundTransparency = 1

local clearBtn = Instance.new("TextButton", controls)
clearBtn.Size = UDim2.new(1, 0, 0, 44)
clearBtn.Position = UDim2.new(0, 0, 0, 0)
clearBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
clearBtn.TextColor3 = Color3.new(1,1,1)
clearBtn.Font = Enum.Font.GothamBold
clearBtn.TextSize = 18
clearBtn.Text = "Clear"
local clearCorner = Instance.new("UICorner", clearBtn)
clearCorner.CornerRadius = UDim.new(0, 8)

local copyAllBtn = Instance.new("TextButton", controls)
copyAllBtn.Size = UDim2.new(1, 0, 0, 44)
copyAllBtn.Position = UDim2.new(0, 0, 0, 54)
copyAllBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
copyAllBtn.TextColor3 = Color3.new(1,1,1)
copyAllBtn.Font = Enum.Font.GothamBold
copyAllBtn.TextSize = 18
copyAllBtn.Text = "Copy All"
local copyAllCorner = Instance.new("UICorner", copyAllBtn)
copyAllCorner.CornerRadius = UDim.new(0, 8)

local lastLogs = {}
local currentMode = nil
local connections = {}

local function Tween(obj,ti,props)
	local info = TweenInfo.new(ti, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
	local t = TweenService:Create(obj, info, props)
	t:Play()
	return t
end

local function animateIntro()
	frame.Size = UDim2.new(0,0,0,0)
	Tween(frame, 0.9, {Size = UDim2.new(0,820,0,560), BackgroundTransparency = 0})
	task.wait(0.14)
	Tween(title, 0.8, {TextTransparency = 0, Position = UDim2.new(0,20,0,0)})
	task.wait(0.12)
	Tween(percent, 0.8, {TextTransparency = 0})
	task.wait(0.12)
end

local function animateLoading()
	for i=0,100 do
		percent.Text = tostring(i) .. "%"
		task.wait(0.015)
	end
end

local function animateComplete()
	Tween(complete, 0.7, {TextTransparency = 0})
	task.wait(1.3)
	Tween(complete, 0.7, {TextTransparency = 1})
end

local function animateMadeBy()
	complete.TextTransparency = 1
	title.TextTransparency = 1
	percent.TextTransparency = 1
	madeBy.Visible = true
	Tween(madeBy, 1, {TextTransparency = 0})
	task.wait(2)
	Tween(madeBy, 1, {TextTransparency = 1})
	task.wait(1)
	madeBy.Visible = false
end

local function createEntry(text)
	local entry = Instance.new("Frame")
	entry.Size = UDim2.new(1, -24, 0, 54)
	entry.BackgroundColor3 = Color3.fromRGB(24,24,24)
	entry.BorderSizePixel = 0
	entry.Parent = logFrame
	local c = Instance.new("UICorner", entry)
	c.CornerRadius = UDim.new(0,8)
	local label = Instance.new("TextLabel", entry)
	label.Size = UDim2.new(1, -110, 1, 0)
	label.Position = UDim2.new(0, 12, 0, 0)
	label.BackgroundTransparency = 1
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.TextYAlignment = Enum.TextYAlignment.Center
	label.Font = Enum.Font.Code
	label.TextSize = 18
	label.TextColor3 = Color3.fromRGB(220,220,220)
	label.Text = text
	local copyBtn = Instance.new("TextButton", entry)
	copyBtn.Size = UDim2.new(0,92,0,36)
	copyBtn.Position = UDim2.new(1, -104, 0.5, -18)
	copyBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
	copyBtn.Font = Enum.Font.GothamSemibold
	copyBtn.TextSize = 16
	copyBtn.TextColor3 = Color3.fromRGB(240,240,240)
	copyBtn.Text = "Copy"
	local cp = Instance.new("UICorner", copyBtn)
	cp.CornerRadius = UDim.new(0,6)
	entry.LayoutOrder = -os.time()
	entry.Size = UDim2.new(1, -24, 0, 0)
	Tween(entry, 0.35, {Size = UDim2.new(1, -24, 0, 54)})
	Tween(entry, 0.35, {BackgroundTransparency = 0})
	copyBtn.MouseButton1Click:Connect(function()
		if setclipboard then
			pcall(setclipboard, text)
		end
		StarterGui:SetCore("SendNotification", {Title = "Copied!", Text = text, Duration = 1})
	end)
	return entry
end

local function addLog(text)
	table.insert(lastLogs, 1, text)
	createEntry(text)
end

clearBtn.MouseButton1Click:Connect(function()
	for _,v in pairs(logFrame:GetChildren()) do
		if v:IsA("Frame") then
			v:Destroy()
		end
	end
	lastLogs = {}
end)

copyAllBtn.MouseButton1Click:Connect(function()
	if setclipboard then
		pcall(setclipboard, table.concat(lastLogs, "\n"))
	end
	StarterGui:SetCore("SendNotification", {Title = "Copied!", Text = "All logs copied", Duration = 1})
end)

local function getFullPath(obj)
	local path = obj.Name
	local parent = obj.Parent
	while parent and parent ~= game do
		path = parent.Name .. "." .. path
		parent = parent.Parent
	end
	return path
end

local function showNotification(text)
	local notif = Instance.new("Frame", screenGui)
	notif.Size = UDim2.new(0, 220, 0, 60)
	notif.Position = UDim2.new(1, -240, 1, -80)
	notif.BackgroundColor3 = Color3.fromRGB(36,36,36)
	notif.BorderSizePixel = 0
	local nc = Instance.new("UICorner", notif)
	nc.CornerRadius = UDim.new(0,10)
	local t = Instance.new("TextLabel", notif)
	t.Size = UDim2.new(1, -20, 0.5, -5)
	t.Position = UDim2.new(0, 10, 0, 5)
	t.BackgroundTransparency = 1
	t.Text = "NOTIFICATION!"
	t.Font = Enum.Font.GothamBold
	t.TextSize = 18
	t.TextColor3 = Color3.fromRGB(220,220,220)
	local t2 = Instance.new("TextLabel", notif)
	t2.Size = UDim2.new(1, -20, 0.5, -5)
	t2.Position = UDim2.new(0, 10, 0.5, 0)
	t2.BackgroundTransparency = 1
	t2.Text = text
	t2.Font = Enum.Font.Gotham
	t2.TextSize = 14
	t2.TextColor3 = Color3.fromRGB(180,180,180)
	delay(3,function() notif:Destroy() end)
end

local function stopLogger()
	for _,c in pairs(connections) do
		if c then pcall(function() c:Disconnect() end) end
	end
	connections = {}
	currentMode = nil
	logFrame:ClearAllChildren()
	modeSelect.Visible = true
	contentHolder.Visible = false
end

UserInputService.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.M and currentMode then
		stopLogger()
	end
end)

soundBtn.MouseButton1Click:Connect(function()
	currentMode = "Sound"
	modeSelect.Visible = false
	contentHolder.Visible = true
	showNotification("Press M to back to menu")
end)

animBtn.MouseButton1Click:Connect(function()
	currentMode = "Animation"
	modeSelect.Visible = false
	contentHolder.Visible = true
	showNotification("Press M to back to menu")

	local character = Player.Character or Player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")

	local tracks = humanoid:GetPlayingAnimationTracks()
	for _,track in pairs(tracks) do
		addLog(track.Animation and getFullPath(track.Animation) or "Unknown Animation")
	end

	connections[#connections+1] = humanoid.AnimationPlayed:Connect(function(track)
		addLog(track.Animation and getFullPath(track.Animation) or "Unknown Animation")
	end)
end)

-- Animacje intro
animateIntro()
animateLoading()
animateComplete()
animateMadeBy()
modeSelect.Visible = true
