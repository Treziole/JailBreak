local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = Player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 820, 0, 560)
frame.Position = UDim2.new(0.5, -410, 0.5, -280)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
frame.BorderSizePixel = 0
frame.BackgroundTransparency = 1
frame.Parent = screenGui
local frameCorner = Instance.new("UICorner", frame)
frameCorner.CornerRadius = UDim.new(0, 14)

-- Draggable
frame.Active = true
frame.Draggable = true

local madeBy = Instance.new("TextLabel", frame)
madeBy.Size = UDim2.new(1, 0, 0, 56)
madeBy.Position = UDim2.new(0.5, 0, 0.5, -28)
madeBy.AnchorPoint = Vector2.new(0.5, 0.5)
madeBy.BackgroundTransparency = 1
madeBy.Text = "Made By Trezi"
madeBy.Font = Enum.Font.GothamBold
madeBy.TextSize = 32
madeBy.TextColor3 = Color3.new(1,1,1)
madeBy.TextTransparency = 1
madeBy.TextXAlignment = Enum.TextXAlignment.Center

local modeSelect = Instance.new("Frame", frame)
modeSelect.Size = UDim2.new(1, -80, 1, -120)
modeSelect.Position = UDim2.new(0, 40, 0, 60)
modeSelect.BackgroundTransparency = 1
modeSelect.Visible = false

local modeTitle = Instance.new("TextLabel", modeSelect)
modeTitle.Size = UDim2.new(1, 0, 0, 50)
modeTitle.BackgroundTransparency = 1
modeTitle.Text = "Choose Logger Mode"
modeTitle.Font = Enum.Font.GothamBold
modeTitle.TextSize = 28
modeTitle.TextColor3 = Color3.new(1,1,1)

local soundBtn = Instance.new("TextButton", modeSelect)
soundBtn.Size = UDim2.new(1, 0, 0, 50)
soundBtn.Position = UDim2.new(0, 0, 0, 70)
soundBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
soundBtn.TextColor3 = Color3.new(1,1,1)
soundBtn.Font = Enum.Font.GothamBold
soundBtn.TextSize = 20
soundBtn.Text = "Sound Logger"
local soundCorner = Instance.new("UICorner", soundBtn)
soundCorner.CornerRadius = UDim.new(0, 8)

local animBtn = Instance.new("TextButton", modeSelect)
animBtn.Size = UDim2.new(1, 0, 0, 50)
animBtn.Position = UDim2.new(0, 0, 0, 130)
animBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 120)
animBtn.TextColor3 = Color3.new(1,1,1)
animBtn.Font = Enum.Font.GothamBold
animBtn.TextSize = 20
animBtn.Text = "Animation Logger"
local animCorner = Instance.new("UICorner", animBtn)
animCorner.CornerRadius = UDim.new(0, 8)

local contentHolder = Instance.new("Frame", frame)
contentHolder.Size = UDim2.new(1, -40, 1, -80)
contentHolder.Position = UDim2.new(0, 20, 0, 60)
contentHolder.BackgroundTransparency = 1
contentHolder.Visible = false

local logFrame = Instance.new("ScrollingFrame", contentHolder)
logFrame.Size = UDim2.new(1, -160, 1, 0)
logFrame.Position = UDim2.new(0, 0, 0, 0)
logFrame.BackgroundColor3 = Color3.fromRGB(14,14,14)
logFrame.BorderSizePixel = 0
logFrame.ScrollBarThickness = 8
logFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
logFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
logFrame.ScrollBarImageColor3 = Color3.fromRGB(80,80,80)
local logCorner = Instance.new("UICorner", logFrame)
logCorner.CornerRadius = UDim.new(0, 10)

local listLayout = Instance.new("UIListLayout", logFrame)
listLayout.Padding = UDim.new(0, 8)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local padding = Instance.new("UIPadding", logFrame)
padding.PaddingTop = UDim.new(0, 12)
padding.PaddingBottom = UDim.new(0, 12)
padding.PaddingLeft = UDim.new(0, 12)
padding.PaddingRight = UDim.new(0, 12)

local controls = Instance.new("Frame", contentHolder)
controls.Size = UDim2.new(0, 140, 1, 0)
controls.Position = UDim2.new(1, -140, 0, 0)
controls.BackgroundTransparency = 1

local clearBtn = Instance.new("TextButton", controls)
clearBtn.Size = UDim2.new(1, 0, 0, 44)
clearBtn.Position = UDim2.new(0, 0, 0, 0)
clearBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
clearBtn.TextColor3 = Color3.new(1,1,1)
clearBtn.Font = Enum.Font.GothamBold
clearBtn.TextSize = 18
clearBtn.Text = "Clear"
local clearCorner = Instance.new("UICorner", clearBtn)
clearCorner.CornerRadius = UDim.new(0, 8)

local copyAllBtn = Instance.new("TextButton", controls)
copyAllBtn.Size = UDim2.new(1, 0, 0, 44)
copyAllBtn.Position = UDim2.new(0, 0, 0, 54)
copyAllBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
copyAllBtn.TextColor3 = Color3.new(1,1,1)
copyAllBtn.Font = Enum.Font.GothamBold
copyAllBtn.TextSize = 18
copyAllBtn.Text = "Copy All"
local copyAllCorner = Instance.new("UICorner", copyAllBtn)
copyAllCorner.CornerRadius = UDim.new(0, 8)

-- Notification
local notification = Instance.new("Frame", screenGui)
notification.Size = UDim2.new(0, 260, 0, 80)
notification.Position = UDim2.new(1, 260, 1, -100)
notification.AnchorPoint = Vector2.new(1, 0)
notification.BackgroundColor3 = Color3.fromRGB(30,30,30)
notification.BorderSizePixel = 0
local notifCorner = Instance.new("UICorner", notification)
notifCorner.CornerRadius = UDim.new(0, 8)
notification.Visible = false

local notifTitle = Instance.new("TextLabel", notification)
notifTitle.Size = UDim2.new(1, -20, 0, 30)
notifTitle.Position = UDim2.new(0, 10, 0, 5)
notifTitle.BackgroundTransparency = 1
notifTitle.Text = "NOTIFICATION!"
notifTitle.Font = Enum.Font.GothamBold
notifTitle.TextSize = 20
notifTitle.TextColor3 = Color3.new(1,1,1)
notifTitle.TextXAlignment = Enum.TextXAlignment.Left

local notifText = Instance.new("TextLabel", notification)
notifText.Size = UDim2.new(1, -20, 0, 40)
notifText.Position = UDim2.new(0, 10, 0, 35)
notifText.BackgroundTransparency = 1
notifText.Text = "Press M to back to menu"
notifText.Font = Enum.Font.Gotham
notifText.TextSize = 16
notifText.TextColor3 = Color3.fromRGB(200,200,200)
notifText.TextXAlignment = Enum.TextXAlignment.Left

local lastLogs = {}
local currentMode = nil
local runningConnections = {}

local function Tween(obj,ti,props)
	local info = TweenInfo.new(ti, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
	local t = TweenService:Create(obj, info, props)
	t:Play()
	return t
end

local function createEntry(text)
	local entry = Instance.new("Frame")
	entry.Size = UDim2.new(1, -24, 0, 54)
	entry.BackgroundColor3 = Color3.fromRGB(24,24,24)
	entry.BorderSizePixel = 0
	entry.Parent = logFrame
	local c = Instance.new("UICorner", entry)
	c.CornerRadius = UDim.new(0,8)
	local label = Instance.new("TextLabel", entry)
	label.Size = UDim2.new(1, -110, 1, 0)
	label.Position = UDim2.new(0, 12, 0, 0)
	label.BackgroundTransparency = 1
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.TextYAlignment = Enum.TextYAlignment.Center
	label.Font = Enum.Font.Code
	label.TextSize = 18
	label.TextColor3 = Color3.fromRGB(220,220,220)
	label.Text = text
	local copyBtn = Instance.new("TextButton", entry)
	copyBtn.Size = UDim2.new(0,92,0,36)
	copyBtn.Position = UDim2.new(1, -104, 0.5, -18)
	copyBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
	copyBtn.Font = Enum.Font.GothamSemibold
	copyBtn.TextSize = 16
	copyBtn.TextColor3 = Color3.fromRGB(240,240,240)
	copyBtn.Text = "Copy"
	local cp = Instance.new("UICorner", copyBtn)
	cp.CornerRadius = UDim.new(0,6)
	copyBtn.MouseButton1Click:Connect(function()
		if setclipboard then
			pcall(setclipboard, text)
		end
	end)
end

local function addLog(text)
	table.insert(lastLogs, 1, text)
	createEntry(text)
end

local function clearLogs()
	for _,v in ipairs(logFrame:GetChildren()) do
		if v:IsA("Frame") then v:Destroy() end
	end
	lastLogs = {}
end

clearBtn.MouseButton1Click:Connect(clearLogs)
copyAllBtn.MouseButton1Click:Connect(function()
	if #lastLogs == 0 then return end
	local combined = table.concat(lastLogs, "\n")
	if setclipboard then
		pcall(setclipboard, combined)
	end
end)

local function stopLogger()
	for _,conn in ipairs(runningConnections) do
		conn:Disconnect()
	end
	runningConnections = {}
	currentMode = nil
	contentHolder.Visible = false
	modeSelect.Visible = true
	clearLogs()
	notification.Visible = false
end

local function showNotification()
	notification.Position = UDim2.new(1, 260, 1, -100)
	notification.Visible = true
	Tween(notification, 0.5, {Position = UDim2.new(1, -20, 1, -100)})
	task.delay(3, function()
		Tween(notification, 0.5, {Position = UDim2.new(1, 260, 1, -100)})
	end)
end

local function startSoundLogger()
	contentHolder.Visible = true
	currentMode = "sound"
	showNotification()
	for _,v in pairs(workspace:GetDescendants()) do
		if v:IsA("Sound") then
			table.insert(runningConnections, v.Played:Connect(function()
				addLog(v.SoundId ~= "" and v.SoundId or v.Name)
			end))
		end
	end
	table.insert(runningConnections, workspace.DescendantAdded:Connect(function(desc)
		if desc:IsA("Sound") then
			table.insert(runningConnections, desc.Played:Connect(function()
				addLog(desc.SoundId ~= "" and desc.SoundId or desc.Name)
			end))
		end
	end))
end

local function startAnimationLogger()
	contentHolder.Visible = true
	currentMode = "animation"
	showNotification()
	local function hookHumanoid(hum)
		table.insert(runningConnections, hum.AnimationPlayed:Connect(function(track)
			addLog(track.Animation and track.Animation.AnimationId or "Unknown Animation")
		end))
	end
	for _,plr in pairs(Players:GetPlayers()) do
		if plr.Character then
			local hum = plr.Character:FindFirstChildOfClass("Humanoid")
			if hum then hookHumanoid(hum) end
		end
		table.insert(runningConnections, plr.CharacterAdded:Connect(function(char)
			local hum = char:WaitForChild("Humanoid")
			hookHumanoid(hum)
		end))
	end
	table.insert(runningConnections, Players.PlayerAdded:Connect(function(plr)
		table.insert(runningConnections, plr.CharacterAdded:Connect(function(char)
			local hum = char:WaitForChild("Humanoid")
			hookHumanoid(hum)
		end))
	end))
end

soundBtn.MouseButton1Click:Connect(function()
	modeSelect.Visible = false
	Tween(contentHolder, 0.5, {BackgroundTransparency = 0})
	startSoundLogger()
end)

animBtn.MouseButton1Click:Connect(function()
	modeSelect.Visible = false
	Tween(contentHolder, 0.5, {BackgroundTransparency = 0})
	startAnimationLogger()
end)

UserInputService.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.M and currentMode then
		stopLogger()
	end
end)

local function main()
	Tween(frame, 0.9, {Size = UDim2.new(0,820,0,560), BackgroundTransparency = 0})
	task.wait(0.3)
	Tween(madeBy, 1, {TextTransparency = 0})
	task.wait(2)
	Tween(madeBy, 1, {TextTransparency = 1})
	task.wait(0.5)
	modeSelect.Visible = true
	Tween(soundBtn, 0.5, {BackgroundColor3 = Color3.fromRGB(0,160,255)})
	Tween(animBtn, 0.5, {BackgroundColor3 = Color3.fromRGB(0,255,160)})
end

main()
